Version 4.2.2
=============

Released: XX XX, 2022

Status: Stable

Changes
-------

Dependencies
^^^^^^^^^^^^

Emailing
^^^^^^^^

Migrate old workflow ``EmailAction`` instances instead of sub-classing
for backwards compatibility. Using the official workflow migration
functionality avoids a double entry in the workflow state action selection
dropdown list.


Sources
^^^^^^^

Ensure new document and file links access works like their respective
views. The links will be active when the access is granted for the source
as well as the document/document type.


Other
^^^^^

- Ensure the object copy permission is required for the object copy link.


Removals
--------

- None


Upgrade process
---------------

.. important::

  If using a direct deployment, Supervisord must be upgraded to version
  4.2.2. See troubleshooting section: :ref:`troubleshooting-version-4.1`


.. include:: partials/upgrade-3.5-4.0.txt


Troubleshooting
---------------

Follow the solutions outlined in the troubleshooting section:
:ref:`troubleshooting-version-4.1`


Backward incompatible changes
-----------------------------

- Renaming of the ``mimetype`` app to ``mime_types``.
- Removal of the ``.api.get_mimetype`` function. The process now requires
  instantiating the configure MIME type backend and calling the
  ``get_mime_type`` method:

  .. code-block:: python

    from mayan.apps.mime_types.classes import MIMETypeBackend
    MIMETypeBackend.get_backend_instance().get_mime_type(...)

- Search model names are now specified in lower case in the user interface
  URL or in the search API URL.


Issues closed
-------------

- None

.. _PyPI: https://pypi.python.org/pypi/mayan-edms/
