Version 4.3
===========

Released: XX, 2022

Status: Stable

Changes
-------



Removals
--------

- Python package ``django-pure-pagination``.
- Python package ``mock``.


Upgrade process
---------------

.. important::

  If using a direct deployment, Supervisord must be upgraded to version
  4.2.2. See troubleshooting section: :ref:`troubleshooting-version-4.1`


.. include:: partials/upgrade-3.5-4.0.txt


Troubleshooting
---------------

Follow the solutions outlined in the troubleshooting section:
:ref:`troubleshooting-version-4.1`


Backward incompatible changes
-----------------------------

- The ``preparestatic`` command is now named ``appearance_prepare_static``.
- The ``purgeperiodictasks`` command is now named
  ``task_manager_purge_periodic_tasks``.
- The ``purgelocks`` command is now named ``lock_manager_purge_locks``.
- The permission "View error log" is now required to view document version
  OCR error logs.
- The permission "View error log" is now required to view document file
  parsing error logs.
- Several view, link, and icons names were modified. Third party app that
  import links or icons, or redirects to any view, must be updated to match
  the updated names.

Deprecations
------------

- The Cabinet API serializer field named ``parent``, will be removed in
  version 5.0. Use the ``parent_id`` instead which is functionally identical.
- The ``IndexTemplateNodeSerializer`` serializer fields ``parent`` and ``index``
  will be removed in version 5.0. Use fields ``parent_id`` and ``index_id``
  which are functionally identical.
- The ``WorkflowInstanceSerializer`` field named ``workflow_template_url``
  will be removed in version 5.0. Use the ``url`` attribute of the
  ``workflow_template`` instead.
- Several management command will be remove in the next minor release. Use
  the corresponding replacement commands instead:

    - ``checkdependencies`` replaced by ``dependencies_check``.
    - ``checkversion`` replaced by ``dependencies_check_version``.
    - ``createautoadmin`` replaced by ``autoadmin_create``.
    - ``generaterequirements`` replaced by ``dependencies_generate_requirements``.
    - ``initialsetup`` replaced by ``initial_setup``.
    - ``installdependencies`` replaced by ``dependencies_install``.
    - ``mountindex`` replaced by ``mirroring_mount_index``.
    - ``performupgrade`` replaced by ``perform_upgrade``.
    - ``platformtemplate`` replaced by ``platform_template``.
    - ``preparestatic`` replaced by ``appearance_prepare_static``.
    - ``purgelocks`` replaced by ``lock_manager_purge_locks``.
    - ``purgepermissions`` replaced by ``permissions_purge``.
    - ``purgeperiodictasks`` replaced by ``task_manager_purge_periodic_tasks``.
    - ``purgestatistics`` replaced by ``statistics_purge``.
    - ``revertsettings`` replaced by ``settings_revert``.
    - ``savesettings`` replaced by ``settings_save``.
    - ``showsettings`` replaced by ``settings_show``.
    - ``showversion`` replaced by ``dependencies_show_version``.


Issues closed
-------------

- :gitlab-issue:`957` Add document parser test to ensure office files are parsed for content
- :gitlab-issue:`1110` Update dependency extract-msg to >= 0.32.0

.. _PyPI: https://pypi.python.org/pypi/mayan-edms/
